{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ref } from 'vue';\nexport default {\n  name: 'PurchaseComplete',\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    let nickName = ref('');\n    let login = ref(true);\n    let orderId = ref(route.query.orderId);\n    let paymentKey = new URLSearchParams(window.location.search).get('paymentKey');\n    let tossOrderId = new URLSearchParams(window.location.search).get('orderId');\n    let amount = new URLSearchParams(window.location.search).get('amount');\n    console.log(paymentKey, tossOrderId, amount);\n\n    // axios.post('https://api.tosspayments.com/v1/payments/confirm', {\n    //   paymentKey: paymentKey,\n    //   amount: amount,\n    //   orderId: tossOrderId\n    // }, {\n    //     headers: {\n    //       Authorization: 'Basic ' + process.env.VUE_APP_SECRET_KEY,\n    //       'Content-Type': 'application/json'\n    //     }\n    // })\n    // .then(response => {\n    //   console.log(response.data);\n    //   return axios.get('/api/product/submit')\n    // })\n    // .then(result=>{\n    //   if(result.data === 'need login') {\n    //     login.value = false;\n    //   } else nickName.value = result.data;\n    // })\n    // .catch(error => {\n    //   console.error(error);\n    // });\n\n    function clickHome() {\n      router.push({\n        path: '/'\n      });\n    }\n    function clickPurchaseList() {\n      router.push({\n        name: 'MyPage',\n        query: {\n          nickName: nickName.value,\n          cart: 0\n        }\n      });\n    }\n    return {\n      clickHome,\n      clickPurchaseList,\n      orderId,\n      login\n    };\n  }\n};","map":{"version":3,"mappings":";AAqBA,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAW;AAC/C,SAASC,GAAE,QAAS,KAAK;AACzB,eAAe;EACbC,IAAI,EAAC,kBAAkB;EACvBC,KAAK,GAAG;IACN,MAAMC,MAAK,GAAIJ,SAAS,EAAE;IAC1B,MAAMK,KAAI,GAAIN,QAAQ,EAAE;IACxB,IAAIO,QAAO,GAAIL,GAAG,CAAC,EAAE,CAAC;IACtB,IAAIM,KAAI,GAAIN,GAAG,CAAC,IAAI,CAAC;IACrB,IAAIO,OAAM,GAAIP,GAAG,CAACI,KAAK,CAACI,KAAK,CAACD,OAAO;IACrC,IAAIE,UAAS,GAAI,IAAIC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,YAAY,CAAC;IAC9E,IAAIC,WAAU,GAAI,IAAIL,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,SAAS,CAAC;IAC5E,IAAIE,MAAK,GAAI,IAAIN,eAAe,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,CAAC,QAAQ,CAAC;IAEtEG,OAAO,CAACC,GAAG,CAACT,UAAU,EAAEM,WAAW,EAAEC,MAAM,CAAC;;IAE5C;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAIA,SAASG,SAAS,GAAG;MACnBhB,MAAM,CAACiB,IAAI,CAAC;QAACC,IAAG,EAAI;MAAG,CAAC,CAAC;IAC3B;IACA,SAASC,iBAAiB,GAAG;MAC3BnB,MAAM,CAACiB,IAAI,CAAC;QAACnB,IAAG,EAAI,QAAQ;QAAEO,KAAI,EAAI;UAACH,QAAO,EAAIA,QAAQ,CAACkB,KAAK;UAAEC,IAAG,EAAI;QAAC;MAAC,CAAC,CAAC;IAC/E;IACA,OAAO;MAACL,SAAS;MAAEG,iBAAiB;MAAEf,OAAO;MAAED;IAAK,CAAC;EACvD;AACF","names":["axios","useRoute","useRouter","ref","name","setup","router","route","nickName","login","orderId","query","paymentKey","URLSearchParams","window","location","search","get","tossOrderId","amount","console","log","clickHome","push","path","clickPurchaseList","value","cart"],"sourceRoot":"","sources":["/Users/kgj/Library/Mobile Documents/com~apple~CloudDocs/공유/project/TGolShop/TGolShop/src/components/PurchaseComplete.vue"],"sourcesContent":["<template>\n  \n  <div class=\"container d-flex justify-content-center\">\n    <div style=\"width:80%;\" class=\"border mt-5\">\n      \n      <div style=\"font-size:large;\" class=\"d-none d-sm-block mt-5 mb-3\">\n        구매를 성공적으로 완료하였습니다.\n      </div>\n      <div style=\"font-size:medium;\" class=\"d-block d-sm-none mt-5 mb-3\">\n        구매를 성공적으로 완료하였습니다.\n      </div>\n      <div class=\"mb-3\" v-if=\"login === false\">\n        <div style=\"font-size: small;\">주문 번호: {{orderId}}</div> <div style=\"color:red; font-size: small;\">(비회원께서는 주문 조회를 위해 반드시 숙지하셔야 합니다.)</div>\n      </div>\n      <button @click=\"clickHome\" style=\"font-weight: bold; font-size: large;\" class=\"btn btn-danger me-1 mb-5 mt-2\">홈으로</button>\n      <button v-if=\"login\" @click=\"clickPurchaseList\" style=\"font-weight: bold; font-size: large;\" class=\"btn btn-success ms-1 mb-5 mt-2\">주문목록</button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { useRoute, useRouter } from 'vue-router'\nimport { ref } from 'vue';\nexport default {\n  name:'PurchaseComplete',\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    let nickName = ref('');\n    let login = ref(true);\n    let orderId = ref(route.query.orderId)\n    let paymentKey = new URLSearchParams(window.location.search).get('paymentKey');\n    let tossOrderId = new URLSearchParams(window.location.search).get('orderId');\n    let amount = new URLSearchParams(window.location.search).get('amount');\n\n    console.log(paymentKey, tossOrderId, amount);\n    \n    // axios.post('https://api.tosspayments.com/v1/payments/confirm', {\n    //   paymentKey: paymentKey,\n    //   amount: amount,\n    //   orderId: tossOrderId\n    // }, {\n    //     headers: {\n    //       Authorization: 'Basic ' + process.env.VUE_APP_SECRET_KEY,\n    //       'Content-Type': 'application/json'\n    //     }\n    // })\n    // .then(response => {\n    //   console.log(response.data);\n    //   return axios.get('/api/product/submit')\n    // })\n    // .then(result=>{\n    //   if(result.data === 'need login') {\n    //     login.value = false;\n    //   } else nickName.value = result.data;\n    // })\n    // .catch(error => {\n    //   console.error(error);\n    // });\n   \n    \n\n    function clickHome() {\n      router.push({path : '/'});\n    }\n    function clickPurchaseList() {\n      router.push({name : 'MyPage', query : {nickName : nickName.value, cart : 0}});\n    }\n    return {clickHome, clickPurchaseList, orderId, login};\n  }\n}\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}