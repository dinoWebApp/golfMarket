{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport axios from 'axios';\nexport default {\n  name: 'SearchPage',\n  setup() {\n    let searchedList = ref([]);\n    const route = useRoute();\n    const router = useRouter();\n    axios.get('/api/search?searchText=' + route.query.searchText).then(result => {\n      // if(result.data.length === 0) {\n      //   alert('일치하는 검색결과가 없습니다.');\n      //   router.go(-1);\n      // } else {\n      //   searchedList.value = result.data;\n      // }\n    }).catch(err => {\n      console.log(err);\n    });\n    function clickCard(e) {\n      let productId = e.currentTarget.children[1].children[1].innerText;\n      console.log(productId);\n      router.push({\n        name: 'PurchasePage',\n        params: {\n          id: productId\n        }\n      });\n    }\n    function filter(val) {\n      return String(val).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    }\n    function discount(before, after, optionPrice) {\n      let answer = 100 * (1 - (after * 1 + optionPrice * 1) / (before * 1 + optionPrice * 1));\n      return Math.round(answer);\n    }\n    return {\n      clickCard,\n      filter,\n      discount,\n      searchedList\n    };\n  }\n};","map":{"version":3,"mappings":";AAqCA,SAASA,GAAE,QAAS,KAAK;AACzB,SAASC,QAAQ,EAAEC,SAAQ,QAAS,YAAW;AAC/C,OAAOC,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAI,EAAC,YAAY;EACjBC,KAAK,GAAG;IACN,IAAIC,YAAW,GAAIN,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAMO,KAAI,GAAIN,QAAQ,EAAE;IACxB,MAAMO,MAAK,GAAIN,SAAS,EAAE;IAC1BC,KAAK,CAACM,GAAG,CAAC,yBAAwB,GAAIF,KAAK,CAACG,KAAK,CAACC,UAAU,EAC3DC,IAAI,CAACC,MAAM,IAAE;MACZ;MACA;MACA;MACA;MACA;MACA;IAAA,CAED,EACAC,KAAK,CAACC,GAAG,IAAE;MACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC;IAED,SAASG,SAAS,CAACC,CAAC,EAAE;MACpB,IAAIC,SAAQ,GAAID,CAAC,CAACE,aAAa,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACC,SAAS;MACjEP,OAAO,CAACC,GAAG,CAACG,SAAS,CAAC;MACtBZ,MAAM,CAACgB,IAAI,CAAC;QAACpB,IAAG,EAAI,cAAc;QAAEqB,MAAK,EAAI;UAACC,EAAC,EAAIN;QAAS;MAAC,CAAC,CAAC;IACjE;IAEA,SAASO,MAAM,CAACC,GAAG,EAAE;MACnB,OAAOC,MAAM,CAACD,GAAG,CAAC,CAACE,OAAO,CAAC,uBAAuB,EAAE,GAAG,CAAC;IAC1D;IAEA,SAASC,QAAQ,CAACC,MAAM,EAAEC,KAAK,EAAEC,WAAW,EAAE;MAC5C,IAAIC,MAAK,GAAI,GAAE,IAAK,IAAI,CAACF,KAAK,GAAC,IAAIC,WAAW,GAAC,CAAC,KAAKF,MAAM,GAAC,IAAIE,WAAW,GAAC,CAAC,CAAC,CAAC;MAC/E,OAAOE,IAAI,CAACC,KAAK,CAACF,MAAM,CAAC;IAC3B;IACA,OAAO;MAACjB,SAAS;MAAES,MAAM;MAAEI,QAAQ;MAAEzB;IAAY,CAAC;EACpD;AAEF","names":["ref","useRoute","useRouter","axios","name","setup","searchedList","route","router","get","query","searchText","then","result","catch","err","console","log","clickCard","e","productId","currentTarget","children","innerText","push","params","id","filter","val","String","replace","discount","before","after","optionPrice","answer","Math","round"],"sourceRoot":"","sources":["/Users/dino/Library/Mobile Documents/com~apple~CloudDocs/공유/project/TGolShop/frontend/src/components/SearchPage.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-5\">\n    <div class=\"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-4 g-4\">\n      <div class=\"col\" v-for=\"item in searchedList\" :key=\"item\">\n        <div @click=\"clickCard\" style=\"cursor:pointer;\" class=\"card shadow-sm\">\n          <div id=\"img-border\">\n            <img id=\"image\" :src='`http://localhost:3000/static/image/${item.thumbnail}`' alt=\"logo\" class=\"img-fluid img-thumbnail\">\n          </div>\n          <div class=\"d-flex\">\n            <span class=\"ms-1\" style=\"font-size:11px;\">상품 코드: </span>\n            <span class=\"ms-1\" style=\"font-size:11px;\">{{item.id}}</span>\n            <span v-if=\"item.deliverOut\" class=\"ms-2\" style=\"font-size:11px; color:red; font-weight:bold;\">[해외직구]</span>\n          </div>\n          \n          <div class=\"card-body\">\n            \n            <div id=\"text-border1\" class=\"d-lg-none\">\n              <p id=\"product-text\" class=\"card-text\" style=\"font-weight: 600;\"> {{item.productName}} </p>\n            </div>\n            <div id=\"text-border2\" class=\"d-none d-lg-block\">\n              <p id=\"product-text\" class=\"card-text\" style=\"font-weight:600; font-size:20px\"> {{item.productName}} </p>\n            </div>\n            \n            <span class=\"text-decoration-line-through\" style=\"font-weight:bold; color:gray\">{{filter(item.beforeDiscount)}} 원</span>\n            <div>\n              <span style=\"font-weight:900; font-size:30px; color:red;\"> {{discount(item.beforeDiscount, item.productPrice, 0)}}% </span>\n              <span style=\"font-weight:900; font-size:22px;\"> {{filter(item.productPrice)}} 원 </span>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport { useRoute, useRouter } from 'vue-router'\nimport axios from 'axios';\nexport default {\n  name:'SearchPage',\n  setup() {\n    let searchedList = ref([]);\n    const route = useRoute();\n    const router = useRouter();\n    axios.get('/api/search?searchText=' + route.query.searchText)\n    .then(result=>{\n      // if(result.data.length === 0) {\n      //   alert('일치하는 검색결과가 없습니다.');\n      //   router.go(-1);\n      // } else {\n      //   searchedList.value = result.data;\n      // }\n      \n    })\n    .catch(err=>{\n      console.log(err);\n    })\n\n    function clickCard(e) {\n      let productId = e.currentTarget.children[1].children[1].innerText;\n      console.log(productId);\n      router.push({name : 'PurchasePage', params : {id : productId}});\n    }\n\n    function filter(val) {\n      return String(val).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    }\n\n    function discount(before, after, optionPrice) {\n      let answer = 100 * (1 - (after*1 + optionPrice*1) / (before*1 + optionPrice*1));\n      return Math.round(answer);\n    }\n    return {clickCard, filter, discount, searchedList};\n  }\n\n}\n</script>\n\n<style>\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}