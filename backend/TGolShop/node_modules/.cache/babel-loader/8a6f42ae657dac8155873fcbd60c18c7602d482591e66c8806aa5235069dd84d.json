{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from '@vue/reactivity';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { watch } from 'vue';\nexport default {\n  name: 'LoginPage',\n  emits: ['loginData'],\n  setup(props, {\n    emit\n  }) {\n    const router = useRouter();\n    let id = ref();\n    let pw = ref();\n    let loginData = ref({\n      id: id,\n      pw: pw\n    });\n    let loginModal = ref(true);\n    let findIdModal = ref(false);\n    let findPwModal = ref(false);\n    let nickName = ref('');\n    let phoneNum = ref('');\n    let getId = ref('');\n    let getIdModal = ref(false);\n    let changedPw = ref('');\n    let changedPwCheck = ref('');\n    let changePwModal = ref(false);\n    let pwValid = ref(false);\n    let pwCheckValid = ref(false);\n    let infoCheckModal = ref(false);\n    let checkId = ref('');\n    axios.get('/api/customer/login-check').then(res => {\n      console.log(res.data);\n      if (res.data !== 'not login') {\n        router.push({\n          path: '/'\n        });\n      }\n    });\n    function signUp() {\n      router.push({\n        path: '/customer/sign-up'\n      });\n    }\n    function login() {\n      axios.post('/api/customer/login', loginData.value).then(res => {\n        console.log(res.data);\n        if (res.data === 'login fail') {\n          alert('아이디 또는 비밀번호가 일치하지 않습니다.');\n        } else {\n          emit('loginData', [res.data, false, true]);\n          router.push({\n            path: '/'\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function findId() {\n      findIdModal.value = true;\n      findPwModal.value = false;\n      loginModal.value = false;\n    }\n    function inputNickName(e) {\n      nickName.value = e.target.value;\n    }\n    function findIdSubmit() {\n      if (nickName.value === '' || phoneNum.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findId?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value).then(result => {\n          if (result.data === 'wrong nickName') {\n            alert('존재하지 않는 닉네임입니다.');\n          } else if (result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            getId.value = result.data;\n            findIdModal.value = false;\n            getIdModal.value = true;\n            nickName.value = '';\n            phoneNum.value = '';\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    function findPwSubmit() {\n      if (nickName.value === '' || phoneNum.value === '' || checkId.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findPw?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value + '&id=' + checkId.value).then(result => {\n          if (result.data === 'wrong id') {\n            alert('존재하지 않는 아이디입니다.');\n          } else if (result.data === 'wrong nickName') {\n            alert('닉네임이 일치하지 않습니다..');\n          } else if (result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            changePwModal.value = true;\n            infoCheckModal.value = false;\n            findIdModal.value = false;\n            getIdModal.value = false;\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    function backPage() {\n      findIdModal.value = false;\n      loginModal.value = true;\n      changePwModal.value = false;\n      infoCheckModal.value = false;\n    }\n    function clickLoginModal() {\n      loginModal.value = true;\n      getIdModal.value = false;\n      changePwModal.value = false;\n    }\n    function changePw() {\n      if (pwValid.value === false) {\n        alert('비밀번호는 8~20자를 입력해야 합니다.');\n      } else if (pwCheckValid.value === false) {\n        alert(\"'비밀번호'와 '비밀번호 확인'이 일치하지 않습니다.\");\n      } else {\n        axios.put('/api/customers/changePw', changedPw.value).then(() => {\n          alert('비밀번호가 성공적으로 변경되었습니다.');\n          changePwModal.value = false;\n          loginModal.value = true;\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    function clickChangePw() {\n      changePwModal.value = true;\n      loginModal.value = false;\n      getIdModal.value = false;\n      infoCheckModal.value = false;\n    }\n    function clickFindPw() {\n      infoCheckModal.value = true;\n      changePwModal.value = false;\n      loginModal.value = false;\n      getIdModal.value = false;\n    }\n    watch(changedPw, (newValue, oldValue) => {\n      console.log({\n        newValue,\n        oldValue\n      });\n      if (newValue.length >= 8 && newValue.length <= 20) {\n        pwValid.value = true;\n      } else pwValid.value = false;\n      if (newValue === '') {\n        document.getElementById('newPw').style.borderColor = '';\n        document.getElementById('newPw').style.borderWidth = '';\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if (pwValid.value === true) {\n        document.getElementById('newPw').style.borderColor = 'green';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      } else if (pwValid.value === false) {\n        document.getElementById('newPw').style.borderColor = 'red';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      }\n      if (newValue === changedPwCheck.value && newValue !== '') {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if (newValue !== changedPwCheck.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n    watch(changedPwCheck, (newValue, oldValue) => {\n      console.log({\n        newValue,\n        oldValue\n      });\n      if (newValue === '') {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if (newValue === changedPw.value) {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if (newValue !== changedPw.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n    return {\n      signUp,\n      login,\n      id,\n      pw,\n      findIdModal,\n      findPwModal,\n      loginModal,\n      findId,\n      nickName,\n      phoneNum,\n      inputNickName,\n      findIdSubmit,\n      backPage,\n      getId,\n      getIdModal,\n      changedPw,\n      changePwModal,\n      clickLoginModal,\n      changePw,\n      clickChangePw,\n      changedPwCheck,\n      pwValid,\n      pwCheckValid,\n      infoCheckModal,\n      checkId,\n      findPwSubmit,\n      clickFindPw\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","useRouter","axios","watch","name","emits","setup","props","emit","router","id","pw","loginData","loginModal","findIdModal","findPwModal","nickName","phoneNum","getId","getIdModal","changedPw","changedPwCheck","changePwModal","pwValid","pwCheckValid","infoCheckModal","checkId","get","then","res","console","log","data","push","path","signUp","login","post","value","alert","catch","err","findId","inputNickName","e","target","findIdSubmit","result","findPwSubmit","backPage","clickLoginModal","changePw","put","clickChangePw","clickFindPw","newValue","oldValue","length","document","getElementById","style","borderColor","borderWidth"],"sourceRoot":"","sources":["/Users/kgj/Desktop/project/market-project/golfMarket/frontend/src/components/LoginPage.vue"],"sourcesContent":["<template>\n  <div v-if=\"loginModal\" class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n    <div class=\"mt-5\">\n      <img class=\"mb-4 col-6 col-md-6\" src=\"../assets/tgolshop.png\" alt=\"dd\">\n    </div>\n    <h1 class=\"h3 mb-3 fw-normal\">로그인</h1>\n    <div class=\"form-floating mb-2\">\n      <input type=\"text\" class=\"form-control\" id=\"floatingIdInput\" placeholder=\"아이디\" @keyup.enter=\"login\" v-model=\"id\">\n      <label for=\"floatingIdInput\">아이디</label>\n    </div>\n    <div class=\"form-floating\">\n      <input type=\"password\" class=\"form-control\" id=\"floatingPassword\" placeholder=\"패스워드\" autocomplete=\"off\" @keyup.enter=\"login\" v-model=\"pw\">\n      <label for=\"floatingPassword\">패스워드</label>\n    </div>\n    <div align=\"left\" class=\"mt-1\">\n      <span @click=\"findId\" id=\"find-id\" class=\"ms-1\"> 아이디 찾기 </span> <span style=\"color:darkgray; font-size: small;\">/</span> <span @click=\"clickFindPw\" id=\"find-pw\"> 비밀번호 재설정 </span>\n    </div>\n    <button @click=\"login\" class=\"w-100 btn btn-lg btn-success mt-3 mb-2\" style=\"font-weight:bold;\">로그인</button>\n    <button class=\"w-100 btn btn-lg mb-3\" @click=\"signUp\" id=\"naver\" style=\"color:white; font-weight:bold; background-color:#12D308;\">간편 회원가입</button>\n  </div>\n\n  <div v-if=\"findIdModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">아이디 찾기</h1>\n        <div class=\"form-floating mb-2\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingNickName\" placeholder=\"닉네임\" @keyup.enter=\"findIdSubmit\" v-bind:value=\"nickName\" @input=\"inputNickName\">\n          <label for=\"floatingNickName\">닉네임</label>\n        </div>\n        <div class=\"form-floating\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingPhoneNum\" placeholder=\"휴대폰번호\" autocomplete=\"off\" @keyup.enter=\"findIdSubmit\" v-model=\"phoneNum\">\n          <label for=\"floatingPhoneNum\">휴대폰번호</label>\n        </div>\n        <button @click=\"findIdSubmit\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">아이디 찾기</button>\n        <button @click=\"backPage\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">이전 페이지</button>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"getIdModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">아이디 찾기</h1>\n        <div class=\"mt-3 mb-2\">\n          <span>고객님의 아이디는 {{ getId }} 입니다.</span>\n        </div>\n        <button @click=\"clickLoginModal\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">로그인</button>\n        <button @click=\"clickFindPw\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">비밀번호 재설정</button>\n      </div>\n    </div>\n  </div>\n  <div v-if=\"changePwModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">비밀번호 재설정</h1>\n        <div class=\"form-floating mb-2\">\n          <input type=\"password\" class=\"form-control\" id=\"newPw\" placeholder=\"새로운 비밀번호 (8~20자)\" v-model=\"changedPw\" autocomplete=\"off\" maxlength=\"20\">\n          <label for=\"newPw\">새로운 비밀번호 (8~20자)</label>\n          <div class=\"ms-1\" style=\"float:left; color:red;\" v-if=\"pwValid === false && changedPw !== ''\">8~20자 입력</div>\n        </div>\n        \n        <div class=\"form-floating\">\n          <input type=\"password\" class=\"form-control\" id=\"newPwCheck\" placeholder=\"비밀번호 확인\" v-model=\"changedPwCheck\" autocomplete=\"off\" maxlength=\"20\">\n          <label for=\"newPwCheck\">비밀번호 확인</label>\n          <div class=\"ms-1\" style=\"float:left; color:red;\" v-if=\"pwCheckValid === false && changedPwCheck !== ''\">비밀번호 불일치</div>\n        </div>\n        <button @click=\"changePw\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">비밀번호 재설정</button>\n        <button @click=\"backPage\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">이전 페이지</button>\n      </div>\n    </div>\n  </div>\n  <div v-if=\"infoCheckModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">비밀번호 재설정</h1>\n        <div class=\"form-floating mb-2\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingId\" placeholder=\"아이디\" @keyup.enter=\"findPwSubmit\" v-model=\"checkId\" >\n          <label for=\"floatingId\">아이디</label>\n        </div>\n        <div class=\"form-floating mb-2\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingNickName2\" placeholder=\"닉네임\" @keyup.enter=\"findPwSubmit\" v-bind:value=\"nickName\" @input=\"inputNickName\">\n          <label for=\"floatingNickName2\">닉네임</label>\n        </div>\n        <div class=\"form-floating\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingPhoneNum2\" placeholder=\"휴대폰번호\" autocomplete=\"off\" @keyup.enter=\"findPwSubmit\" v-model=\"phoneNum\">\n          <label for=\"floatingPhoneNum2\">휴대폰번호</label>\n        </div>\n        <button @click=\"findPwSubmit\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">비밀번호 재설정</button>\n        <button @click=\"backPage\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">이전 페이지</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { watch } from 'vue';\nexport default {\n  name:'LoginPage',\n  emits:['loginData'],\n  setup(props, {emit}) {\n    const router = useRouter();\n    let id = ref();\n    let pw = ref();\n    let loginData = ref({\n      id : id,\n      pw : pw\n    });\n    let loginModal = ref(true);\n    let findIdModal = ref(false);\n    let findPwModal = ref(false);\n    let nickName = ref('');\n    let phoneNum = ref('');\n    let getId = ref('');\n    let getIdModal = ref(false);\n    let changedPw = ref('');\n    let changedPwCheck = ref('');\n    let changePwModal = ref(false);\n    let pwValid = ref(false);\n    let pwCheckValid = ref(false);\n    let infoCheckModal = ref(false);\n    let checkId = ref('');\n\n    axios.get('/api/customer/login-check')\n    .then(res=>{\n      console.log(res.data);\n      if(res.data !== 'not login') {\n        router.push({path:'/'});\n      }\n    })\n\n    function signUp() {\n      router.push({path:'/customer/sign-up'});\n    }\n\n    function login() {\n      axios.post('/api/customer/login', loginData.value)\n      .then(res=>{\n        console.log(res.data);\n        if (res.data === 'login fail') {\n          alert('아이디 또는 비밀번호가 일치하지 않습니다.')\n        } else {\n          emit('loginData', [res.data, false, true]);\n          router.push({path:'/'});\n        }\n      }).catch(err=>{\n        console.log(err);\n      })\n    }\n\n    function findId() {\n      findIdModal.value = true;\n      findPwModal.value = false;\n      loginModal.value = false;\n    }\n\n    function inputNickName(e) {\n      nickName.value = e.target.value;\n    }\n\n    function findIdSubmit() {\n      if(nickName.value === '' || phoneNum.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findId?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value)\n        .then(result=>{\n          if(result.data === 'wrong nickName') {\n            alert('존재하지 않는 닉네임입니다.');\n          } else if(result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            getId.value = result.data;\n            findIdModal.value = false;\n            getIdModal.value = true;\n            nickName.value = '';\n            phoneNum.value = '';\n          }\n        })\n        .catch(err=>{\n          console.log(err);\n        })\n      }\n    }\n\n    function findPwSubmit() {\n      if(nickName.value === '' || phoneNum.value === '' || checkId.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findPw?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value + '&id=' + checkId.value)\n        .then(result=>{\n          if(result.data === 'wrong id') {\n            alert('존재하지 않는 아이디입니다.');\n          }\n          else if(result.data === 'wrong nickName') {\n            alert('닉네임이 일치하지 않습니다..');\n          } else if(result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            changePwModal.value = true;\n            infoCheckModal.value = false;\n            findIdModal.value = false;\n            getIdModal.value = false;\n          }\n        })\n        .catch(err=>{\n          console.log(err);\n        })\n      }\n    }\n\n    function backPage() {\n      findIdModal.value = false;\n      loginModal.value = true;\n      changePwModal.value = false;\n      infoCheckModal.value = false;\n    }\n\n    function clickLoginModal() {\n      loginModal.value = true;\n      getIdModal.value = false;\n      changePwModal.value = false;\n    }\n\n    function changePw() {\n      if (pwValid.value === false) {\n        alert('비밀번호는 8~20자를 입력해야 합니다.')\n      } else if (pwCheckValid.value === false) {\n        alert(\"'비밀번호'와 '비밀번호 확인'이 일치하지 않습니다.\");\n      } else {\n        axios.put('/api/customers/changePw', changedPw.value)\n      .then(()=>{\n        alert('비밀번호가 성공적으로 변경되었습니다.');\n        changePwModal.value = false;\n        loginModal.value = true;\n      })\n      .catch(err=>{\n        console.log(err);\n      })\n      }\n      \n    }\n\n    function clickChangePw() {\n      changePwModal.value = true;\n      loginModal.value = false;\n      getIdModal.value = false;\n      infoCheckModal.value = false;\n    }\n     \n    function clickFindPw() {\n      infoCheckModal.value = true;\n      changePwModal.value = false;\n      loginModal.value = false;\n      getIdModal.value = false;\n    }\n\n    watch(changedPw, (newValue, oldValue)=>{\n      console.log({newValue, oldValue});\n      if (newValue.length >= 8 && newValue.length <= 20) {\n        pwValid.value = true;\n      } else pwValid.value = false;\n      if (newValue === '') {\n        document.getElementById('newPw').style.borderColor = '';\n        document.getElementById('newPw').style.borderWidth = '';\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if(pwValid.value === true) {\n        document.getElementById('newPw').style.borderColor = 'green';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      } else if(pwValid.value === false) {\n        document.getElementById('newPw').style.borderColor = 'red';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      }\n\n      if (newValue === changedPwCheck.value && newValue !== '') {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if(newValue !== changedPwCheck.value){\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n\n    watch(changedPwCheck, (newValue, oldValue)=>{\n      console.log({newValue, oldValue});\n\n      if (newValue === '') {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if(newValue === changedPw.value) {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if(newValue !== changedPw.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n\n\n\n    return{signUp, login, id, pw, findIdModal, findPwModal, loginModal, findId, nickName, phoneNum, inputNickName, findIdSubmit, backPage,\n    getId, getIdModal, changedPw, changePwModal, clickLoginModal, changePw, clickChangePw, changedPwCheck, pwValid, pwCheckValid, infoCheckModal,\n    checkId, findPwSubmit, clickFindPw};\n  }\n}\n</script>\n\n<style>\n  #naver:hover{\n    background-color: #07B70D !important;\n  }\n  #kakao:hover{\n    background-color: #d8b208!important;\n  }\n\n  #find-id {\n    text-decoration: none;\n    color:darkgray;\n    font-size: small;\n  }\n\n  #find-id:hover {\n    color:black;\n    cursor: pointer;\n  }\n\n  #find-pw {\n    text-decoration: none;\n    color:darkgray;\n    font-size: small;\n  }\n\n  #find-pw:hover {\n    color:black;\n    cursor: pointer;\n  }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}