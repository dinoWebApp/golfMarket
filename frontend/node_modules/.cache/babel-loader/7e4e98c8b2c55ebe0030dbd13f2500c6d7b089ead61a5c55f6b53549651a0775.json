{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { useRoute, useRouter } from 'vue-router';\nimport { ref } from '@vue/reactivity';\nimport StarRating from 'vue-star-rating';\nexport default {\n  name: 'PurchasePage',\n  components: {\n    StarRating\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    let imagePath = ref('');\n    let infoImage = ref('');\n    let product = ref({});\n    let productId = ref(0);\n    let optionText = ref('');\n    let optionPrice = ref(0);\n    let orderNum = ref(0);\n    let optionSelected = ref(0);\n    let productInfo = ref(true);\n    let relatedProduct = ref(false);\n    let review = ref(false);\n    let qna = ref(false);\n    let relatedList = ref([]);\n    let reviews = ref([]);\n    let totalReview = ref({});\n    let purchaseDetail = ref(false);\n    let name = ref('');\n    let phoneNum = ref('');\n    let addressNum = ref('');\n    let address = ref('');\n    let addressName = ref('');\n    let detailAddress = ref('');\n    let totalPrice = ref(0);\n    let loginCheck = ref(false);\n    axios.get('/api/product/purchase/' + route.params.id).then(res => {\n      console.log(res.data);\n      product.value = res.data.product;\n      imagePath.value = 'http://localhost:3000/static/image/' + res.data.product.thumbnail;\n      infoImage.value = 'http://localhost:3000/static/image/' + res.data.product.infoImage;\n      relatedList.value = res.data.relatedList;\n      reviews.value = res.data.reviews;\n      totalReview.value = res.data.totalReview;\n    }).catch(err => {\n      console.log(err);\n    });\n    function filter(val) {\n      return String(val).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    }\n    function discount(before, after, optionPrice) {\n      let answer = 100 * (1 - (after * 1 + optionPrice * 1) / (before * 1 + optionPrice * 1));\n      return Math.round(answer);\n    }\n    function selectOption() {\n      let optionSelect = document.getElementById('optionText');\n      if (optionSelect.options[document.getElementById('optionText').selectedIndex].text === '옵션 선택') {\n        optionText.value = '';\n        optionPrice.value = 0;\n        optionSelected.value = 0;\n        console.log(optionText.value);\n        console.log(optionPrice.value);\n      } else {\n        optionText.value = optionSelect.options[document.getElementById('optionText').selectedIndex].text;\n        optionPrice.value = optionSelect.options[document.getElementById('optionText').selectedIndex].value;\n        optionSelected.value = 1;\n        console.log(optionText.value);\n        console.log(optionPrice.value);\n      }\n    }\n    function selectNum() {\n      let numberSelect = document.getElementById('orderNum');\n      if (numberSelect.options[document.getElementById('orderNum').selectedIndex].text === '0') {\n        orderNum.value = 0;\n        console.log(orderNum.value);\n      } else {\n        orderNum.value = numberSelect.options[document.getElementById('orderNum').selectedIndex].value;\n        console.log(orderNum.value);\n      }\n    }\n    function clickProdInfo() {\n      productInfo.value = true;\n      relatedProduct.value = false;\n      review.value = false;\n      qna.value = false;\n    }\n    function clickRelProd() {\n      productInfo.value = false;\n      relatedProduct.value = true;\n      review.value = false;\n      qna.value = false;\n    }\n    function clickReview() {\n      productInfo.value = false;\n      relatedProduct.value = false;\n      review.value = true;\n      qna.value = false;\n    }\n    function clickQna() {\n      productInfo.value = false;\n      relatedProduct.value = false;\n      review.value = false;\n      qna.value = true;\n    }\n    function clickCard(e) {\n      let productId = e.currentTarget.children[1].children[1].innerText;\n      console.log(productId);\n      router.push({\n        name: 'PurchasePage',\n        params: {\n          id: productId\n        }\n      });\n    }\n    function clickPurchase() {\n      if (optionSelected.value === 0) {\n        alert('옵션을 선택하여 주십시오.');\n      } else if (document.getElementById('purchase-way').options[document.getElementById('purchase-way').selectedIndex].text === '결제 방법') {\n        alert('결제 방법을 선택하여 주십시오.');\n      } else if (orderNum.value === 0) {\n        alert('주문 개수를 선택하여 주십시오.');\n      } else {\n        axios.get('/api/product/purchase-detail').then(res => {\n          if (res.data === 'need login') {\n            var myModal = new bootstrap.Modal(document.getElementById('myModal'), options);\n          }\n          name.value = res.data.name;\n          phoneNum.value = res.data.phoneNum;\n          addressNum.value = res.data.addressNum;\n          address.value = res.data.address;\n          addressName.value = res.data.addressName;\n          detailAddress.value = res.data.detailAddress;\n          purchaseDetail.value = true;\n          loginCheck.value = true;\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    function calTotal(productPrice, optionPrice, optionSelected, orderNum) {\n      totalPrice.value = (productPrice * 1 + optionPrice * 1) * optionSelected * orderNum;\n      return totalPrice.value;\n    }\n    function backPage() {\n      router.go(0);\n    }\n    return {\n      productId,\n      product,\n      filter,\n      discount,\n      selectOption,\n      imagePath,\n      optionPrice,\n      optionText,\n      selectNum,\n      optionSelected,\n      orderNum,\n      infoImage,\n      productInfo,\n      relatedProduct,\n      review,\n      qna,\n      clickProdInfo,\n      clickRelProd,\n      clickReview,\n      clickQna,\n      relatedList,\n      clickCard,\n      reviews,\n      totalReview,\n      purchaseDetail,\n      clickPurchase,\n      name,\n      phoneNum,\n      addressNum,\n      address,\n      addressName,\n      detailAddress,\n      calTotal,\n      totalPrice,\n      backPage\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","useRoute","useRouter","ref","StarRating","name","components","setup","route","router","imagePath","infoImage","product","productId","optionText","optionPrice","orderNum","optionSelected","productInfo","relatedProduct","review","qna","relatedList","reviews","totalReview","purchaseDetail","phoneNum","addressNum","address","addressName","detailAddress","totalPrice","loginCheck","get","params","id","then","res","console","log","data","value","thumbnail","catch","err","filter","val","String","replace","discount","before","after","answer","Math","round","selectOption","optionSelect","document","getElementById","options","selectedIndex","text","selectNum","numberSelect","clickProdInfo","clickRelProd","clickReview","clickQna","clickCard","e","currentTarget","children","innerText","push","clickPurchase","alert","myModal","bootstrap","Modal","calTotal","productPrice","backPage","go"],"sourceRoot":"","sources":["/Users/dino/Library/Mobile Documents/com~apple~CloudDocs/공유/project/TGolShop/frontend/src/components/PurchasePage.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\">Modal title</h5>\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <p>Modal body text goes here.</p>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary\">Save changes</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"purchaseDetail === false\" class=\"container px-4 px-lg-5 my-5\">\n      <div class=\"row gx-4 gx-lg-5 align-items-center\">\n        <div class=\"col-md-6 col-xl-5\">\n          <img :src='imagePath' alt=\"product\" class=\"card-img-top mb-5 mb-md-0\">\n        </div>\n        <div align=\"left\" class=\"col-md-6 col-xl-7 border\">\n          <div class=\"small mb-4 mt-1\">상품 코드: {{product.id}} </div>\n          <h3 v-if=\"product.deliverOut\" style=\"font-weight:bold; color:red;\">[해외 직구]</h3>\n          <h2 class=\"fw-bolder mb-4\"> {{product.productName}} </h2>\n          <div class=\"fs-5 mb-3\">\n            <span class=\"text-decoration-line-through\">{{filter(product.beforeDiscount * 1 + optionPrice * 1)}} 원</span>\n            <div>\n              <span style=\"font-weight:900; font-size:40px; color:red;\"> {{discount(product.beforeDiscount, product.productPrice, optionPrice)}}% </span>\n              <span style=\"font-weight:900; font-size:30px;\"> {{filter(product.productPrice * 1 + optionPrice * 1)}} 원 </span>\n            </div>\n          </div>\n          \n          <div class=\"mb-3\" align=\"left\">\n            <div class=\"mb-1\" style=\"font-size:19px\">무료 배송</div>\n            <div v-if=\"product.deliverKor\" style=\"font-size:19px\">당일 배송 (16시 이전 주문 건)</div> \n            <div v-if=\"product.deliverOut\" style=\"font-size:19px\">발송 완료까지 최대 2주 소요</div>\n          </div>\n        \n          <select id=\"optionText\" @change=\"selectOption\" class=\"form-select mb-2\" aria-label=\"Default select example\">\n            <option selected>옵션 선택</option>\n            <option v-for=\"(item, index) in product.optionData\" :key=\"index\" :value=\"item.optionPrice\"> \n              {{item.optionText}}(+{{item.optionPrice}}원)\n            </option>\n          </select>\n          <select id=\"purchase-way\" class=\"form-select mb-4\" aria-label=\"Default select example\">\n            <option selected>결제 방법</option>\n            <option> 무통장입금 </option>\n            <option> 일반 카드 결제 </option>\n            <option> 카카오페이 </option>\n            <option> 네이버페이 </option>\n          </select>\n          <div class=\"d-flex mb-3\">\n            <span class=\"me-3\" style=\"font-size:25px; font-weight:900; color:red;\">최종 금액:</span>\n            <span class=\"me-1\" style=\"font-size:25px; font-weight:900\"> {{filter(calTotal(product.productPrice, optionPrice, optionSelected, orderNum))}} </span>\n            <span style=\"font-size:25px; font-weight:900\"> 원 </span>\n            \n          </div>  \n          <div class=\"d-flex\">\n            <span class=\"ms-2\" style=\"font-size:15px;\">주문 개수</span>\n          </div>\n          <div class=\"d-flex mb-2\">\n            \n            <select @change=\"selectNum\" id=\"orderNum\" class=\"form-select me-2 ms-1\" aria-label=\"Default select example\" style=\"max-width: 4rem\">\n              <option selected>0</option>\n              <option value=\"1\">1</option>\n              <option value=\"2\">2</option>\n              <option value=\"3\">3</option>\n            </select>\n            <!-- <input class=\"form-control text-center me-3 ms-1\" id=\"inputQuantity\" type=\"num\" value=\"1\" style=\"max-width: 3rem\"> -->\n            <button class=\"btn btn-outline-success flex-shrink-0 me-1\" style=\"font-weight:bold;\" type=\"button\">\n                <i class=\"bi-cart-fill me-1\"></i>\n                장바구니 담기\n            </button>\n            <button @click=\"clickPurchase\" class=\"btn btn-danger\" style=\"font-weight:bold;\">구매하기</button>\n          </div>\n        </div>\n        \n        <div class=\"border mt-3\">\n          <ul class=\"nav nav-pills nav-fill\" id=\"pills-tab\" role=\"tablist\">\n            <li class=\"nav-item\" role=\"presentation\">\n              <button @click=\"clickProdInfo\" class=\"nav-link active\" id=\"pills-home-tab\" data-bs-toggle=\"pill\" type=\"button\" role=\"tab\" aria-selected=\"true\">상품정보</button>\n            </li>\n            <li class=\"nav-item\" role=\"presentation\">\n              <button @click=\"clickRelProd\" class=\"nav-link\" id=\"pills-profile-tab\" data-bs-toggle=\"pill\" type=\"button\" role=\"tab\" aria-selected=\"false\">관련상품</button>\n            </li>\n            <li class=\"nav-item\" role=\"presentation\">\n              <button @click=\"clickReview\" class=\"nav-link\" id=\"pills-contact-tab\" data-bs-toggle=\"pill\" type=\"button\" role=\"tab\" aria-selected=\"false\">상품후기</button>\n            </li>\n            <li class=\"nav-item\" role=\"presentation\">\n              <button @click=\"clickQna\" class=\"nav-link\" data-bs-toggle=\"pill\" type=\"button\" role=\"tab\" aria-selected=\"false\">상품문의</button>\n            </li>\n          </ul>\n        </div>\n        <div class=\"col-12 border\">\n          <div v-if=\"productInfo\" class=\"col-12 d-flex\">\n            <div class=\"d-none d-md-block col-md-1 col-xl-2\"></div>\n            <div class=\"col-12 col-md-10 col-xl-8\">\n              <img :src='infoImage' alt=\"product\" class=\"img-fluid mt-5\">\n            </div>\n            <div class=\"d-none d-md-block col-md-1 col-xl-2\"></div>\n          </div>\n\n          <div v-if=\"relatedProduct\" class=\"container mt-5\">\n            <div class=\"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-3 row-cols-xl-4 g-4\">\n              <div class=\"col\" v-for=\"item in relatedList\" :key=\"item\">\n                <div @click=\"clickCard\" style=\"cursor:pointer;\" class=\"card shadow-sm\">\n                  <div id=\"img-border\">\n                    <img id=\"image\" :src='`http://localhost:3000/static/image/${item.thumbnail}`' alt=\"logo\" class=\"img-fluid img-thumbnail\">\n                  </div>\n                  <div class=\"d-flex\">\n                    <span class=\"ms-1\" style=\"font-size:11px;\">상품 코드: </span>\n                    <span class=\"ms-1\" style=\"font-size:11px;\">{{item.id}}</span>\n                    <span v-if=\"item.deliverOut\" class=\"ms-2\" style=\"font-size:11px; color:red; font-weight:bold;\">[해외직구]</span>\n                  </div>\n                  \n                  <div class=\"card-body\">\n                    \n                    <div id=\"text-border1\" class=\"d-lg-none\">\n                      <p id=\"product-text\" class=\"card-text\" style=\"font-weight:600;\"> {{item.productName}} </p>\n                    </div>\n                    <div id=\"text-border2\" class=\"d-none d-lg-block\">\n                      <p id=\"product-text\" class=\"card-text\" style=\"font-weight:600;\"> {{item.productName}} </p>\n                    </div>\n                    \n                    <span class=\"text-decoration-line-through\" style=\"font-weight:bold; color:gray\">{{filter(item.beforeDiscount)}} 원</span>\n                    <div>\n                      <span style=\"font-weight:900; font-size:30px; color:red;\"> {{discount(item.beforeDiscount, item.productPrice, 0)}}% </span>\n                      <span style=\"font-weight:900; font-size:22px;\"> {{filter(item.productPrice)}} 원 </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n            </div>\n          </div>\n          <div class=\"mb-3\" v-if=\"review\" >\n            <div class=\"row p-5 bg-light rounded-3 mt-3\">\n              <div class=\"row col-6\">\n                <div class=\"col-0 col-md-2 col-xl-3\"></div>\n                <div class=\"col-12 col-md-10 col-xl-9\" align='left'>\n                  <div class=\"d-none d-lg-block ms-2 mb-2\" style=\"font-size:30px; font-weight:bold;\">상품후기({{product.reviews}})</div>\n                  <div class=\"d-block d-lg-none ms-2 mb-2\" style=\"font-size:25px; font-weight:bold;\">상품후기({{product.reviews}})</div>\n                  <star-rating class=\"d-none d-lg-block\" :rating=\"totalReview.average\" :show-rating=\"false\" :read-only=\"true\" :increment=\"0.01\"></star-rating>\n                  <star-rating class=\"d-block d-lg-none\" :star-size=\"30\" :rating=\"totalReview.average\" :show-rating=\"false\" :read-only=\"true\" :increment=\"0.01\"></star-rating>\n                  <div class=\"d-none d-lg-block ms-5 mt-3\" style=\"font-size:20px\">\n                    평점 평균 : {{totalReview.average}}/5\n                  </div>\n                  <div class=\"d-block d-lg-none ms-2 mt-3\" style=\"font-size:15px\">\n                    평점 평균 : {{totalReview.average}}/5\n                  </div>\n                </div>\n                \n              </div>\n              <div class=\"row col-6\">\n                <div class=\"col-lg-1 col-0\"></div>\n                <div class=\"col-lg-10 col-xl-9 col-12\">\n                  <div class=\"d-flex mb-3 \">\n                    <div class=\"col-2 col-lg-1\" style=\"font-size:15px\">5점</div>\n                    <div class=\"col-lg-9 col-8 progress\">\n                      <div class=\"progress-bar bg-warning\" role=\"progressbar\" aria-label=\"Success example\" :style=\"`width: ${totalReview.fivePer}%`\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                    <div class=\"col-2\" style=\"font-size:15px\">{{totalReview.fivePer}}%</div>\n                  </div>\n                  <div class=\"d-flex mb-3\">\n                    <div class=\"col-2 col-lg-1\" style=\"font-size:15px\">4점</div>\n                    <div class=\"col-lg-9 col-8 progress\">\n                      <div class=\"progress-bar bg-warning\" role=\"progressbar\" aria-label=\"Success example\" :style=\"`width: ${totalReview.fourPer}%`\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                    <div class=\"col-2\" style=\"font-size:15px\">{{totalReview.fourPer}}%</div>\n                  </div>\n                  <div class=\"d-flex mb-3\">\n                    <div class=\"col-2 col-lg-1\" style=\"font-size:15px\">3점</div>\n                    <div class=\"col-lg-9 col-8 progress\">\n                      <div class=\"progress-bar bg-warning\" role=\"progressbar\" aria-label=\"Success example\" :style=\"`width: ${totalReview.threePer}%`\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                    <div class=\"col-2\" style=\"font-size:15px\">{{totalReview.threePer}}%</div>\n                  </div>\n                  <div class=\"d-flex mb-3\">\n                    <div class=\"col-2 col-lg-1\" style=\"font-size:15px\">2점</div>\n                    <div class=\"col-lg-9 col-8 progress\">\n                      <div class=\"progress-bar bg-warning\" role=\"progressbar\" aria-label=\"Success example\" :style=\"`width: ${totalReview.twoPer}%`\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                    <div class=\"col-2\" style=\"font-size:15px\">{{totalReview.twoPer}}%</div>\n                  </div>\n                  <div class=\"d-flex mb-3\">\n                    <div class=\"col-2 col-lg-1\" style=\"font-size:15px\">1점</div>\n                    <div class=\"col-lg-9 col-8 progress\">\n                      <div class=\"progress-bar bg-warning\" role=\"progressbar\" aria-label=\"Success example\" :style=\"`width: ${totalReview.onePer}%`\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    </div>\n                    <div class=\"col-2\" style=\"font-size:15px\">{{totalReview.onePer}}%</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div v-for=\"item in reviews\" :key=\"item\" align='left'>\n              <hr/>\n              <div>\n                <span> 작성자 : {{item.user}}</span>\n              </div>\n              <div style=\"display:inline-block;\">\n                <star-rating :inline=\"true\" :star-size=\"20\" :read-only=\"true\" :show-rating=\"false\" v-model:rating=\"item.stars\"></star-rating>\n                <span style=\"font-size:12px\" class=\"ms-1\">{{item.date}} </span>\n              </div>\n              <div class=\"mt-4\">\n                {{item.comment}}\n              </div>\n            </div>\n          </div>\n          <div class=\"mb-3\" v-if=\"qna\">\n            <div class=\"row p-5 bg-light rounded-3 mt-3\">\n              <div class=\"row\" style=\"font-weight:30; font-size:23px;\">\n                상품에 관하여 궁금한 것을 물어보세요\n              </div>\n              <li class=\"row mb-4\" style=\"color:darkgray\">\n                상품 문의를 통한 교환, 반품, 환불은 처리되지 않습니다.\n              </li>\n              <div class=\"row\">\n                <textarea class=\"col-9\" id=\"qna\" cols=\"30\" rows=\"3\"></textarea>\n                <button class=\"btn btn-secondary col-2\" style=\"font-weight:bold;\">문의하기</button>\n              </div>\n              \n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n    <div v-if=\"purchaseDetail\" class=\"container\">\n      <div class=\"mt-4 mb-4\">\n        <h1 align='left'>주문/결제</h1>\n      </div>\n      <hr/>\n      <div class=\"mt-3 mb-3\">\n        <h4 style=\"font-weight:bold;\" align=\"left\">배송지 입력 (수정 가능)</h4>\n      </div>\n      <div class=\"border\">\n        <div class=\"col-5 col-lg-3 ms-1 me-1 mt-3 mb-3\">\n          <div align='left' class=\"ms-1 mb-1\">성명</div>\n          <input v-bind:value=\"name\" @input=\"inputName\" type=\"text\" class=\"form-control mb-2\" id=\"name\" placeholder=\"성명\" maxlength=\"6\">\n          <div align='left' class=\"ms-1 mb-1\">휴대폰 번호</div>\n          <input v-bind:value=\"phoneNum\" @input=\"inputPhoneNum\" type=\"tel\" class=\"form-control mb-2\" id=\"phoneNum\" placeholder=\"휴대폰 번호 (10~11자)\" maxlength=\"11\">\n        </div>\n        <div class=\"ms-1 col-10 col-lg-5 mt-3\">\n          <div class=\"d-flex\">\n            <div class=\"col-6\">\n              <input type=\"text\" class=\"form-control mb-2\" id=\"address-num\" v-model=\"addressNum\" placeholder=\"우편번호\" readonly>\n            </div>\n            <div class=\"col-auto ms-1\">\n              <button  type=\"button\" class=\"btn btn-light border\" @click=\"inputAddress\">우편번호 찾기</button>\n            </div>\n          </div>\n          <div class=\"d-flex\">\n            <div class=\"col-9 pe-1\">\n              <input type=\"text\" class=\"form-control mb-2\" id=\"address1\" v-model=\"address\" placeholder=\"주소\"  readonly>\n            </div>\n            <div class=\"col-3 ps-1\" >\n              <input type=\"text\" class=\"form-control mb-2\" id=\"address3\" v-model=\"addressName\" placeholder=\"\" readonly>\n            </div>\n          </div>\n          <div class=\"d-flex\">\n            <div class=\"col-12\">\n              <input type=\"text\" class=\"form-control mb-2\" id=\"detailAddress\" v-model=\"detailAddress\" placeholder=\"상세주소\" maxlength=\"25\">\n            </div>\n            \n          </div>\n        </div>\n      </div>\n      <div class=\"mt-4 mb-3\">\n        <h4 style=\"font-weight:bold;\" align='left'>주문상품</h4>\n      </div>\n      <hr/>\n      <div class=\"border\">\n        <div class=\"row mt-4\">\n          <div class=\"col-6\"> <h6>주문상품 및 옵션</h6></div>\n          <div class=\"col-2\"><h6>수량</h6></div>\n          <div class=\"col-4\"> <h6>상품금액</h6></div>\n        </div>\n        <hr/>\n        <div class=\"row\">\n          <div class=\"col-6\">\n            <div class=\"d-none d-lg-block\"> <h5>{{product.productName}}</h5> </div>\n            <div class=\"d-block d-lg-none\"> <h6>{{product.productName}}</h6> </div>\n            <div style=\"color:darkgray\">{{optionText}}</div>\n          </div>\n          <div class=\"col-2 d-none d-lg-block\"><h5> {{orderNum}} </h5></div>\n          <div class=\"col-2 d-block d-lg-none\"><h6> {{orderNum}} </h6></div>\n          <div class=\"col-4\">\n            <div class=\"d-none d-lg-block\" style=\"font-weight:bold;\"> <h5>{{filter(totalPrice)}} 원</h5>  </div>\n            <div class=\"d-block d-lg-none\" style=\"font-weight:bold;\"> <h6>{{filter(totalPrice)}} 원</h6>  </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"mt-4 d-flex\">\n        <h2 style=\"color:red; font-weight:bold;\">결제 금액:</h2>\n        <h2 class=\"ms-3\"> {{filter(totalPrice)}} 원 </h2>\n        <button class=\"btn btn-danger ms-4\" style=\"font-weight:bold;\">결제하기</button>\n        <button @click=\"backPage\" class=\"btn btn-outline-success flex-shrink-0 ms-1\" style=\"font-weight:bold;\" type=\"button\">이전페이지</button>\n      </div>\n    </div>\n    \n  </div>\n  \n  \n</template>\n\n<script>\nimport axios from 'axios';\nimport { useRoute, useRouter, } from 'vue-router'\nimport { ref } from '@vue/reactivity'\nimport StarRating from 'vue-star-rating'\n\nexport default {\n  name: 'PurchasePage',\n  components: {\n    StarRating\n  },\n  setup() {\n    const route = useRoute();\n    const router = useRouter();\n    let imagePath = ref('');\n    let infoImage = ref('');\n    let product = ref({});\n    let productId = ref(0);\n    let optionText = ref('');\n    let optionPrice = ref(0);\n    let orderNum = ref(0);\n    let optionSelected = ref(0);\n    let productInfo = ref(true);\n    let relatedProduct = ref(false);\n    let review = ref(false);\n    let qna = ref(false);\n    let relatedList = ref([]);\n    let reviews = ref([]);\n    let totalReview = ref({});\n    let purchaseDetail = ref(false);\n    let name = ref('');\n    let phoneNum = ref('');\n    let addressNum = ref('');\n    let address = ref('');\n    let addressName = ref('');\n    let detailAddress = ref('');\n    let totalPrice = ref(0);\n    let loginCheck = ref(false);\n\n\n    axios.get('/api/product/purchase/' + route.params.id)\n    .then(res=>{\n      console.log(res.data);\n      product.value = res.data.product;\n      imagePath.value = 'http://localhost:3000/static/image/' + res.data.product.thumbnail;\n      infoImage.value = 'http://localhost:3000/static/image/' + res.data.product.infoImage;\n      relatedList.value = res.data.relatedList;\n      reviews.value = res.data.reviews\n      totalReview.value = res.data.totalReview;\n    })\n    .catch(err=>{\n      console.log(err);\n    })\n\n\n    function filter(val) {\n      return String(val).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n    }\n    \n    function discount(before, after, optionPrice) {\n      let answer = 100 * (1 - (after*1 + optionPrice*1) / (before*1 + optionPrice*1));\n      return Math.round(answer);\n    }\n\n    function selectOption() {\n      let optionSelect = document.getElementById('optionText');\n      if (optionSelect.options[document.getElementById('optionText').selectedIndex].text === '옵션 선택') {\n        optionText.value = '';\n        optionPrice.value = 0;\n        optionSelected.value = 0;\n        console.log(optionText.value);\n        console.log(optionPrice.value);\n      } else {\n        optionText.value = optionSelect.options[document.getElementById('optionText').selectedIndex].text;\n        optionPrice.value = optionSelect.options[document.getElementById('optionText').selectedIndex].value;\n        optionSelected.value = 1;\n        console.log(optionText.value);\n        console.log(optionPrice.value);\n      }\n    }\n\n    function selectNum() {\n      let numberSelect = document.getElementById('orderNum');\n      if (numberSelect.options[document.getElementById('orderNum').selectedIndex].text === '0') {\n        orderNum.value = 0;\n        console.log(orderNum.value);\n      } else {\n        orderNum.value = numberSelect.options[document.getElementById('orderNum').selectedIndex].value;\n        console.log(orderNum.value);\n      }\n    }\n\n    function clickProdInfo() {\n      productInfo.value = true;\n      relatedProduct.value = false;\n      review.value = false;\n      qna.value = false;\n    }\n    function clickRelProd() {\n      \n      productInfo.value = false;\n      relatedProduct.value = true;\n      review.value = false;\n      qna.value = false;\n    }\n    function clickReview() {\n      productInfo.value = false;\n      relatedProduct.value = false;\n      review.value = true;\n      qna.value = false;\n    }\n    function clickQna() {\n      productInfo.value = false;\n      relatedProduct.value = false;\n      review.value = false;\n      qna.value = true;\n    }\n\n    function clickCard(e) {\n      let productId = e.currentTarget.children[1].children[1].innerText;\n      console.log(productId);\n      router.push({name : 'PurchasePage', params : {id : productId}});\n    }\n\n    function clickPurchase() {\n      if(optionSelected.value === 0) {\n        alert('옵션을 선택하여 주십시오.');\n      } else if(document.getElementById('purchase-way')\n      .options[document.getElementById('purchase-way').selectedIndex]\n      .text === '결제 방법') {\n        alert('결제 방법을 선택하여 주십시오.');\n      } else if(orderNum.value === 0) {\n        alert('주문 개수를 선택하여 주십시오.')\n      } else {\n        axios.get('/api/product/purchase-detail')\n        .then(res=>{\n          if(res.data === 'need login') {\n            var myModal = new bootstrap.Modal(document.getElementById('myModal'), options)\n          }\n          name.value = res.data.name;\n          phoneNum.value = res.data.phoneNum;\n          addressNum.value = res.data.addressNum;\n          address.value = res.data.address;\n          addressName.value = res.data.addressName;\n          detailAddress.value = res.data.detailAddress;\n          purchaseDetail.value = true;\n          loginCheck.value = true;\n        })\n        .catch(err=>{\n          console.log(err);\n        });\n      }\n    }\n\n    function calTotal(productPrice, optionPrice, optionSelected, orderNum) {\n      totalPrice.value = (productPrice * 1 + optionPrice * 1)*optionSelected*orderNum;\n      return totalPrice.value;\n    }\n\n    function backPage() {\n      router.go(0);\n    }\n\n    \n    \n\n    return{productId, product, filter, discount, selectOption, imagePath, optionPrice, optionText, selectNum, optionSelected, orderNum, infoImage,\n    productInfo, relatedProduct, review, qna, clickProdInfo, clickRelProd,clickReview, clickQna, relatedList, clickCard, reviews,\n    totalReview, purchaseDetail, clickPurchase, name, phoneNum, addressNum, address, addressName, detailAddress, calTotal, totalPrice, backPage};\n  }\n}\n</script>\n\n<style>\n.nav-pills > .nav-item > button.active {\n  background-color:rgb(49, 178, 2);\n}\n.nav-pills > .nav-item > button{\n  color:darkgray;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}