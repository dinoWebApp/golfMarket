{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from '@vue/reactivity';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { watch } from 'vue';\nexport default {\n  name: 'LoginPage',\n  emits: ['loginData'],\n  setup(props, {\n    emit\n  }) {\n    const router = useRouter();\n    let id = ref();\n    let pw = ref();\n    let loginData = ref({\n      id: id,\n      pw: pw\n    });\n    let loginModal = ref(true);\n    let findIdModal = ref(false);\n    let findPwModal = ref(false);\n    let nickName = ref('');\n    let phoneNum = ref('');\n    let getId = ref('');\n    let getIdModal = ref(false);\n    let changedPw = ref('');\n    let changedPwCheck = ref('');\n    let changePwModal = ref(false);\n    let pwValid = ref(false);\n    let pwCheckValid = ref(false);\n    axios.get('/api/customer/login-check').then(res => {\n      console.log(res.data);\n      if (res.data !== 'not login') {\n        router.push({\n          path: '/'\n        });\n      }\n    });\n    function signUp() {\n      router.push({\n        path: '/customer/sign-up'\n      });\n    }\n    function login() {\n      axios.post('/api/customer/login', loginData.value).then(res => {\n        console.log(res.data);\n        if (res.data === 'login fail') {\n          alert('아이디 또는 비밀번호가 일치하지 않습니다.');\n        } else {\n          emit('loginData', [res.data, false, true]);\n          router.push({\n            path: '/'\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function findId() {\n      findIdModal.value = true;\n      findPwModal.value = false;\n      loginModal.value = false;\n    }\n    function inputNickName(e) {\n      nickName.value = e.target.value;\n    }\n    function findIdSubmit() {\n      if (nickName.value === '' || phoneNum.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findId?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value).then(result => {\n          if (result.data === 'wrong nickName') {\n            alert('존재하지 않는 닉네임입니다.');\n          } else if (result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            getId.value = result.data;\n            findIdModal.value = false;\n            getIdModal.value = true;\n          }\n        }).catch(err => {\n          console.log(err);\n        });\n      }\n    }\n    function backPage() {\n      findIdModal.value = false;\n      loginModal.value = true;\n    }\n    function clickLoginModal() {\n      loginModal.value = true;\n      getIdModal.value = false;\n      changePwModal.value = false;\n    }\n    function changePw() {\n      axios.put('/api/customers/changePw', changedPw.value).then(() => {\n        alert('비밀번호가 성공적으로 변경되었습니다.');\n        changePwModal.value = false;\n        loginModal.value = true;\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    function clickChangePw() {\n      changePwModal.value = true;\n      loginModal.value = false;\n      getIdModal.value = false;\n    }\n    watch(changedPw, (newValue, oldValue) => {\n      console.log({\n        newValue,\n        oldValue\n      });\n      if (newValue.length >= 8 && newValue.length <= 20) {\n        pwValid.value = true;\n      } else pwValid.value = false;\n      if (newValue === '') {\n        document.getElementById('newPw').style.borderColor = '';\n        document.getElementById('newPw').style.borderWidth = '';\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if (pwValid.value === true) {\n        document.getElementById('newPw').style.borderColor = 'green';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      } else if (pwValid.value === false) {\n        document.getElementById('newPw').style.borderColor = 'red';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      }\n      if (newValue === changedPwCheck.value && newValue !== '') {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if (newValue !== changedPwCheck.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n    watch(changedPwCheck, (newValue, oldValue) => {\n      console.log({\n        newValue,\n        oldValue\n      });\n      if (newValue === '') {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if (newValue === changedPw.value) {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if (newValue !== changedPw.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n    return {\n      signUp,\n      login,\n      id,\n      pw,\n      findIdModal,\n      findPwModal,\n      loginModal,\n      findId,\n      nickName,\n      phoneNum,\n      inputNickName,\n      findIdSubmit,\n      backPage,\n      getId,\n      getIdModal,\n      changedPw,\n      changePwModal,\n      clickLoginModal,\n      changePw,\n      clickChangePw,\n      changedPwCheck,\n      pwValid,\n      pwCheckValid\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["ref","useRouter","axios","watch","name","emits","setup","props","emit","router","id","pw","loginData","loginModal","findIdModal","findPwModal","nickName","phoneNum","getId","getIdModal","changedPw","changedPwCheck","changePwModal","pwValid","pwCheckValid","get","then","res","console","log","data","push","path","signUp","login","post","value","alert","catch","err","findId","inputNickName","e","target","findIdSubmit","result","backPage","clickLoginModal","changePw","put","clickChangePw","newValue","oldValue","length","document","getElementById","style","borderColor","borderWidth"],"sourceRoot":"","sources":["/Users/kgj/Desktop/project/market-project/golfMarket/frontend/src/components/LoginPage.vue"],"sourcesContent":["<template>\n  <div v-if=\"loginModal\" class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n    <div class=\"mt-5\">\n      <img class=\"mb-4 col-6 col-md-6\" src=\"../assets/tgolshop.png\" alt=\"dd\">\n    </div>\n    <h1 class=\"h3 mb-3 fw-normal\">로그인</h1>\n    <div class=\"form-floating mb-2\">\n      <input type=\"text\" class=\"form-control\" id=\"floatingIdInput\" placeholder=\"아이디\" @keyup.enter=\"login\" v-model=\"id\">\n      <label for=\"floatingIdInput\">아이디</label>\n    </div>\n    <div class=\"form-floating\">\n      <input type=\"password\" class=\"form-control\" id=\"floatingPassword\" placeholder=\"패스워드\" autocomplete=\"off\" @keyup.enter=\"login\" v-model=\"pw\">\n      <label for=\"floatingPassword\">패스워드</label>\n    </div>\n    <div align=\"left\" class=\"mt-1\">\n      <span @click=\"findId\" id=\"find-id\" class=\"ms-1\"> 아이디 찾기 </span> <span style=\"color:darkgray; font-size: small;\">/</span> <span @click=\"clickChangePw\" id=\"find-pw\"> 비밀번호 재설정 </span>\n    </div>\n    <button @click=\"login\" class=\"w-100 btn btn-lg btn-success mt-3 mb-2\" style=\"font-weight:bold;\">로그인</button>\n    <button class=\"w-100 btn btn-lg mb-3\" @click=\"signUp\" id=\"naver\" style=\"color:white; font-weight:bold; background-color:#12D308;\">간편 회원가입</button>\n  </div>\n\n  <div v-if=\"findIdModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">아이디 찾기</h1>\n        <div class=\"form-floating mb-2\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingNickName\" placeholder=\"닉네임\" @keyup.enter=\"findIdSubmit\" v-bind:value=\"nickName\" @input=\"inputNickName\">\n          <label for=\"floatingNickName\">닉네임</label>\n        </div>\n        <div class=\"form-floating\">\n          <input type=\"text\" class=\"form-control\" id=\"floatingPhoneNum\" placeholder=\"휴대폰번호\" autocomplete=\"off\" @keyup.enter=\"findIdSubmit\" v-model=\"phoneNum\">\n          <label for=\"floatingPhoneNum\">휴대폰번호</label>\n        </div>\n        <button @click=\"findIdSubmit\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">아이디 찾기</button>\n        <button @click=\"backPage\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">이전 페이지</button>\n      </div>\n    </div>\n  </div>\n\n  <div v-if=\"getIdModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">아이디 찾기</h1>\n        <div class=\"mt-3 mb-2\">\n          <span>고객님의 아이디는 {{ getId }} 입니다.</span>\n        </div>\n        <button @click=\"clickLoginModal\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">로그인</button>\n        <button @click=\"clickChangePw\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">비밀번호 재설정</button>\n      </div>\n    </div>\n  </div>\n  <div v-if=\"changePwModal\">\n    <div class=\"container mt-3 col-9 col-sm-7 col-md-6 col-lg-5 col-xxl-4 border\">\n      <div class=\"mt-3 mb-3\">\n        <h1 class=\"h3 mb-3 fw-normal\">비밀번호 재설정</h1>\n        <div class=\"form-floating mb-2\">\n          <input type=\"password\" class=\"form-control\" id=\"newPw\" placeholder=\"새로운 비밀번호 (8~20자)\" v-model=\"changePw\" autocomplete=\"off\" maxlength=\"20\">\n          <label for=\"floatingPhm\">새로운 비밀번호 (8~20자)</label>\n          <div class=\"ms-1\" style=\"float:left; color:red;\" v-if=\"pwValid === false && changedPw !== ''\">8~20자 입력</div>\n        </div>\n        \n        <div class=\"col-9 mb-4\">\n          <input type=\"password\" class=\"form-control\" id=\"newPwCheck\" placeholder=\"비밀번호 확인\" v-model=\"changedPwCheck\" autocomplete=\"off\" maxlength=\"20\">\n          <label for=\"floatingPhoneNum\">새로운 비밀번호 (8~20자)</label>\n          <div class=\"ms-1\" style=\"float:left; color:red;\" v-if=\"pwCheckValid === false && changedPwCheck !== ''\">비밀번호 불일치</div>\n        </div>\n        <button @click=\"changePw\" class=\" btn btn-danger mt-3 mb-2\" style=\"font-weight:bold;\">비밀번호 재설정</button>\n        <button @click=\"backPage\" class=\"btn btn-success mt-3 mb-2 ms-1\" style=\"font-weight:bold;\">이전 페이지</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from '@vue/reactivity';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\nimport { watch } from 'vue';\nexport default {\n  name:'LoginPage',\n  emits:['loginData'],\n  setup(props, {emit}) {\n    const router = useRouter();\n    let id = ref();\n    let pw = ref();\n    let loginData = ref({\n      id : id,\n      pw : pw\n    });\n    let loginModal = ref(true);\n    let findIdModal = ref(false);\n    let findPwModal = ref(false);\n    let nickName = ref('');\n    let phoneNum = ref('');\n    let getId = ref('');\n    let getIdModal = ref(false);\n    let changedPw = ref('');\n    let changedPwCheck = ref('');\n    let changePwModal = ref(false);\n    let pwValid = ref(false);\n    let pwCheckValid = ref(false);\n\n    axios.get('/api/customer/login-check')\n    .then(res=>{\n      console.log(res.data);\n      if(res.data !== 'not login') {\n        router.push({path:'/'});\n      }\n    })\n\n    function signUp() {\n      router.push({path:'/customer/sign-up'});\n    }\n\n    function login() {\n      axios.post('/api/customer/login', loginData.value)\n      .then(res=>{\n        console.log(res.data);\n        if (res.data === 'login fail') {\n          alert('아이디 또는 비밀번호가 일치하지 않습니다.')\n        } else {\n          emit('loginData', [res.data, false, true]);\n          router.push({path:'/'});\n        }\n      }).catch(err=>{\n        console.log(err);\n      })\n    }\n\n    function findId() {\n      findIdModal.value = true;\n      findPwModal.value = false;\n      loginModal.value = false;\n    }\n\n    function inputNickName(e) {\n      nickName.value = e.target.value;\n    }\n\n    function findIdSubmit() {\n      if(nickName.value === '' || phoneNum.value === '') {\n        alert('정보를 모두 입력해 주십시오');\n      } else {\n        axios.get('/api/customer/findId?nickName=' + nickName.value + \"&phoneNum=\" + phoneNum.value)\n        .then(result=>{\n          if(result.data === 'wrong nickName') {\n            alert('존재하지 않는 닉네임입니다.');\n          } else if(result.data === 'wrong phoneNum') {\n            alert('휴대폰 번호가 일치하지 않습니다.');\n          } else {\n            getId.value = result.data;\n            findIdModal.value = false;\n            getIdModal.value = true;\n          }\n        })\n        .catch(err=>{\n          console.log(err);\n        })\n      }\n    }\n\n    function backPage() {\n      findIdModal.value = false;\n      loginModal.value = true;\n    }\n\n    function clickLoginModal() {\n      loginModal.value = true;\n      getIdModal.value = false;\n      changePwModal.value = false;\n    }\n\n    function changePw() {\n      axios.put('/api/customers/changePw', changedPw.value)\n      .then(()=>{\n        alert('비밀번호가 성공적으로 변경되었습니다.');\n        changePwModal.value = false;\n        loginModal.value = true;\n      })\n      .catch(err=>{\n        console.log(err);\n      })\n    }\n\n    function clickChangePw() {\n      changePwModal.value = true;\n      loginModal.value = false;\n      getIdModal.value = false;\n    }\n\n    watch(changedPw, (newValue, oldValue)=>{\n      console.log({newValue, oldValue});\n      if (newValue.length >= 8 && newValue.length <= 20) {\n        pwValid.value = true;\n      } else pwValid.value = false;\n      if (newValue === '') {\n        document.getElementById('newPw').style.borderColor = '';\n        document.getElementById('newPw').style.borderWidth = '';\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if(pwValid.value === true) {\n        document.getElementById('newPw').style.borderColor = 'green';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      } else if(pwValid.value === false) {\n        document.getElementById('newPw').style.borderColor = 'red';\n        document.getElementById('newPw').style.borderWidth = '2px';\n      }\n\n      if (newValue === changedPwCheck.value && newValue !== '') {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if(newValue !== changedPwCheck.value){\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n\n    watch(changedPwCheck, (newValue, oldValue)=>{\n      console.log({newValue, oldValue});\n\n      if (newValue === '') {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = '';\n        document.getElementById('newPwCheck').style.borderWidth = '';\n      } else if(newValue === changedPw.value) {\n        pwCheckValid.value = true;\n        document.getElementById('newPwCheck').style.borderColor = 'green';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      } else if(newValue !== changedPw.value) {\n        pwCheckValid.value = false;\n        document.getElementById('newPwCheck').style.borderColor = 'red';\n        document.getElementById('newPwCheck').style.borderWidth = '2px';\n      }\n    });\n\n\n\n    return{signUp, login, id, pw, findIdModal, findPwModal, loginModal, findId, nickName, phoneNum, inputNickName, findIdSubmit, backPage,\n    getId, getIdModal, changedPw, changePwModal, clickLoginModal, changePw, clickChangePw, changedPwCheck, pwValid, pwCheckValid};\n  }\n}\n</script>\n\n<style>\n  #naver:hover{\n    background-color: #07B70D !important;\n  }\n  #kakao:hover{\n    background-color: #d8b208!important;\n  }\n\n  #find-id {\n    text-decoration: none;\n    color:darkgray;\n    font-size: small;\n  }\n\n  #find-id:hover {\n    color:black;\n    cursor: pointer;\n  }\n\n  #find-pw {\n    text-decoration: none;\n    color:darkgray;\n    font-size: small;\n  }\n\n  #find-pw:hover {\n    color:black;\n    cursor: pointer;\n  }\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}